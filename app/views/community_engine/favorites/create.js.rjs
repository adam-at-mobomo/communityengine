if @favorite.new_record?
  #it didn't work
  page.alert(@favorite.errors.full_messages.join(', '))
else
  case @favorite.favoritable.class.to_s.demodulize.tableize
    when 'clippings'
      page.select("#clipping_#{@favorite.favoritable.id}").each do |element|
        element.replace(render(:partial => 'community_engine/clippings/clipping', :object => @favorite.favoritable)) 
      end
      page.select("#clipping_#{@favorite.favoritable.id}_meta").each do |element|
        element.replace(render(:partial => 'community_engine/clippings/meta', :formats => [:html], :locals => {:clipping => @favorite.favoritable}))    
      end

    when 'posts'
      page.replace("post_#{@favorite.favoritable.id}_meta", :partial => 'community_engine/posts/meta', :locals => {:post => @favorite.favoritable})
  end
end